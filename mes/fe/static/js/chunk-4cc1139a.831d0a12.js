(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4cc1139a"],{"09f4":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),Math.easeInOutQuad=function(e,t,n,r){return e/=r/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)};var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function i(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function a(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(e,t,n){var s=a(),o=e-s,l=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=l;var a=Math.easeInOutQuad(c,s,o,t);i(a),c<t?r(e):n&&"function"===typeof n&&n()};u()}},"0ab7":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return o}));var r=n("b775");function i(e){return Object(r["a"])({url:"/basic/inspectionruleitem/list",method:"post",data:e})}function a(e){return Object(r["a"])({url:"/basic/inspectionruleitem",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/basic/inspectionruleitem",method:"put",data:e})}function o(e){return Object(r["a"])({url:"/basic/inspectionruleitem/".concat(e),method:"delete"})}},"25d4":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return o}));var r=n("b775");function i(e){return Object(r["a"])({url:"/basic/inboundorder/list",method:"post",data:e})}function a(e){return Object(r["a"])({url:"/basic/inboundorder",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/basic/inboundorder",method:"put",data:e})}function o(e){return Object(r["a"])({url:"/basic/inboundorder/".concat(e),method:"delete"})}},"309f":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return o}));var r=n("b775");function i(e){return Object(r["a"])({url:"/basic/shift/list",method:"post",data:e})}function a(e){return Object(r["a"])({url:"/basic/shift",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/basic/shift",method:"put",data:e})}function o(e){return Object(r["a"])({url:"/basic/shift/".concat(e),method:"delete"})}},"3b75":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.dialogFormVisible,expression:"!dialogFormVisible"}]},[n("div",{staticClass:"filter-container"},[n("el-form",{ref:"filterForm",attrs:{model:e.listQuery,inline:!0}},[n("el-form-item",{attrs:{label:"",prop:"isMark"}},[n("el-select",{attrs:{filterable:"",placeholder:"进料单状态"},on:{change:e.handleFilter},model:{value:e.listQuery.isMark,callback:function(t){e.$set(e.listQuery,"isMark",t)},expression:"listQuery.isMark"}},e._l(e.markStatuses,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("搜索\n        ")]),e._v(" "),n("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",on:{click:function(t){e.resetForm("filterForm"),e.handleFilter()}}},[e._v("重置")]),e._v(" "),n("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"success",icon:"el-icon-edit"},on:{click:e.handleAdd}},[e._v("\n          添加\n        ")])],1)],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:"序号","min-width":"40px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.$index)+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"入库单号","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.inboundOrderId))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"原料编号","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.materialCode))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"供应商","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.vendorName))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"检验日期","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e._f("parseTime")(t.row.inspectDate,"{y}-{m}-{d}")))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"状态","min-width":"50px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.isMark?"已提交":"未提交"))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(n){return e.handleUpdate(t.row)}}},[e._v("编辑\n          ")]),e._v(" "),n("el-button",{attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:function(n){return e.handleDelete(t.row,"true")}}},[e._v("删除\n          ")])]}}])})],1),e._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.current,limit:e.listQuery.size},on:{"update:page":function(t){return e.$set(e.listQuery,"current",t)},"update:limit":function(t){return e.$set(e.listQuery,"size",t)},pagination:e.getList}})],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.dialogFormVisible,expression:"dialogFormVisible"}]},[n("div",{staticStyle:{"font-size":"20px"}},[e._v(e._s(e.textMap[e.dialogStatus])+"检查单")]),e._v(" "),n("div",{staticStyle:{margin:"10px 0px 20px"}},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){"create"===e.dialogStatus?e.submit():e.updateData()}}},[e._v("确认")]),e._v(" "),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1),e._v(" "),n("el-form",{ref:"iqcForm",attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"100px"}},[n("el-row",[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"入库单号：",prop:"inboundOrderId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},on:{change:e.handleInboundOrderChange},model:{value:e.temp.inboundOrderId,callback:function(t){e.$set(e.temp,"inboundOrderId",t)},expression:"temp.inboundOrderId"}},e._l(e.inboundOrders,(function(e){return n("el-option",{key:e.id,attrs:{label:e.number,value:e.id}})})),1)],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"原料编号：",prop:"materialId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.temp.materialId,callback:function(t){e.$set(e.temp,"materialId",t)},expression:"temp.materialId"}},e._l(e.materials,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"钢卷编号：",prop:"serialNumber"}},[n("el-input",{model:{value:e.temp.serialNumber,callback:function(t){e.$set(e.temp,"serialNumber",t)},expression:"temp.serialNumber"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"检验日期：",prop:"inspectDate"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"请选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:e.temp.inspectDate,callback:function(t){e.$set(e.temp,"inspectDate",t)},expression:"temp.inspectDate"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"产地：",prop:"vendorId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.temp.vendorId,callback:function(t){e.$set(e.temp,"vendorId",t)},expression:"temp.vendorId"}},e._l(e.vendors,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"产线：",prop:"lineId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.temp.lineId,callback:function(t){e.$set(e.temp,"lineId",t)},expression:"temp.lineId"}},e._l(e.lines,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"下制程：",prop:"nextOperationId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.temp.nextOperationId,callback:function(t){e.$set(e.temp,"nextOperationId",t)},expression:"temp.nextOperationId"}},e._l(e.operations,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"班别：",prop:"shiftId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.temp.shiftId,callback:function(t){e.$set(e.temp,"shiftId",t)},expression:"temp.shiftId"}},e._l(e.shifts,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"钢种：",prop:"materailType"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.temp.materialTypeId,callback:function(t){e.$set(e.temp,"materialTypeId",t)},expression:"temp.materialTypeId"}},e._l(e.materialTypes,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"表面品级：",prop:"surfaceGrade"}},[n("el-input",{model:{value:e.temp.surfaceGrade,callback:function(t){e.$set(e.temp,"surfaceGrade",t)},expression:"temp.surfaceGrade"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"用途：",prop:"uses"}},[n("el-input",{model:{value:e.temp.uses,callback:function(t){e.$set(e.temp,"uses",t)},expression:"temp.uses"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"客户：",prop:"customer"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.temp.customerId,callback:function(t){e.$set(e.temp,"customerId",t)},expression:"temp.customerId"}},e._l(e.customers,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1)],1),e._v(" "),n("el-tabs",{attrs:{value:"first"}},[n("el-tab-pane",{attrs:{label:"检验记录",name:"first"}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,attrs:{data:e.temp.checkList,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:"序号","min-width":"40px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.$index)+"\n            ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"检验项目","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.temp.checkList[t.$index].name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"检验内容","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.temp.checkList[t.$index].description))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"检验规格","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.temp.checkList[t.$index].specification))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"规格单位","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.temp.checkList[t.$index].specificationUnit))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"检验工具","min-width":"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e.temp.checkList[t.$index].tool))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"检测结果","min-width":"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:e.temp.checkList[t.$index].result,callback:function(n){e.$set(e.temp.checkList[t.$index],"result",n)},expression:"temp.checkList[scope.$index].result"}})]}}])})],1)],1)],1),e._v(" "),n("el-tabs",{staticStyle:{"margin-bottom":"20px"},attrs:{value:"first"}},[n("el-tab-pane",{attrs:{label:"不良类别",name:"first"}},[n("qc-defect",{key:e.temp.id,attrs:{defectList:e.temp.defectList},on:{"update:defectList":function(t){return e.$set(e.temp,"defectList",t)},"update:defect-list":function(t){return e.$set(e.temp,"defectList",t)}}})],1)],1)],1)])},i=[],a=(n("ac4d"),n("8a81"),n("7f7f"),n("6b54"),n("ac6a"),n("5df3"),n("96cf"),n("3b8d")),s=n("ed08"),o=n("666f"),l=n("f36f"),c=n("309f"),u=n("49de"),d=n("f6b0"),p=n("25d4"),m=n("c45a"),f=n("9e35"),b=n("b775");function h(e){return Object(b["a"])({url:"/basic/iqc/list",method:"post",data:e})}function v(e){return Object(b["a"])({url:"/basic/iqc",method:"post",data:e})}function g(e){return Object(b["a"])({url:"/basic/iqc",method:"put",data:e})}function y(e){return Object(b["a"])({url:"/basic/iqc/".concat(e),method:"delete"})}var w=n("f4942"),O=n("0ab7"),k=n("6724"),x=n("333d"),j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"iqc-defect"},[n("div",{staticClass:"filter-container"},[n("el-form",{ref:"filterForm",attrs:{model:e.listQuery,inline:!0}},[n("el-button",{staticClass:"filter-item",staticStyle:{margin:"16px 0px"},attrs:{type:"success",icon:"el-icon-edit"},on:{click:e.handleAdd}},[e._v("\n        添加\n      ")])],1)],1),e._v(" "),n("el-table",{key:e.tableKey,attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:"序号","min-width":"40px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.$index)+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"缺陷名称","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"缺陷组名称","min-width":"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.groupName))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("i",{staticClass:"el-icon-edit update",on:{click:function(n){return e.handleUpdate(t.row)}}}),e._v(" "),n("i",{staticClass:"el-icon-delete delete",on:{click:function(n){return e.handleDelete(t.row,"true")}}})]}}])})],1),e._v(" "),n("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,width:"1000px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"iqcDefectForm",attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"100px"}},[n("el-row",[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"缺陷代号：",prop:"id"}},[n("el-cascader",{attrs:{options:e.defects,props:{expandTrigger:"hover",value:"id",label:"name"}},model:{value:e.defectActive,callback:function(t){e.defectActive=t},expression:"defectActive"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"上面：",prop:"up"}},[n("el-input",{model:{value:e.temp.up,callback:function(t){e.$set(e.temp,"up",t)},expression:"temp.up"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"下面：",prop:"down"}},[n("el-input",{model:{value:e.temp.down,callback:function(t){e.$set(e.temp,"down",t)},expression:"temp.down"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"宽度位置：",prop:"widthPosition"}},[n("el-input",{model:{value:e.temp.widthPosition,callback:function(t){e.$set(e.temp,"widthPosition",t)},expression:"temp.widthPosition"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"起始位置：",prop:"startPosition"}},[n("el-input",{model:{value:e.temp.startPosition,callback:function(t){e.$set(e.temp,"startPosition",t)},expression:"temp.startPosition"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"结束位置：",prop:"endPosition"}},[n("el-input",{model:{value:e.temp.endPosition,callback:function(t){e.$set(e.temp,"endPosition",t)},expression:"temp.endPosition"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"缺陷长度：",prop:"defectLength"}},[n("el-input",{model:{value:e.temp.defectLength,callback:function(t){e.$set(e.temp,"defectLength",t)},expression:"temp.defectLength"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"程度：",prop:"degree"}},[n("el-input",{model:{value:e.temp.degree,callback:function(t){e.$set(e.temp,"degree",t)},expression:"temp.degree"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"类别|波高：",prop:"waveHeightCategory"}},[n("el-input",{model:{value:e.temp.waveHeightCategory,callback:function(t){e.$set(e.temp,"waveHeightCategory",t)},expression:"temp.waveHeightCategory"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"周期|mm：",prop:"period"}},[n("el-input",{model:{value:e.temp.period,callback:function(t){e.$set(e.temp,"period",t)},expression:"temp.period"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"频率：",prop:"frequency"}},[n("el-input",{model:{value:e.temp.frequency,callback:function(t){e.$set(e.temp,"frequency",t)},expression:"temp.frequency"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"直径|mm：",prop:"diameter"}},[n("el-input",{model:{value:e.temp.diameter,callback:function(t){e.$set(e.temp,"diameter",t)},expression:"temp.diameter"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"距边|mm：",prop:"margin"}},[n("el-input",{model:{value:e.temp.margin,callback:function(t){e.$set(e.temp,"margin",t)},expression:"temp.margin"}})],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){"create"===e.dialogStatus?e.submit():e.updateData()}}},[e._v("确认")])],1)],1)],1)},I=[],L=n("75fc"),$=n("b494"),R={name:"QcDefect",components:{Pagination:x["a"]},directives:{waves:k["a"]},props:["defectList"],data:function(){return{tableKey:0,list:this.defectList,listQuery:{current:1,size:10},temp:{id:"",groupId:"",up:"",down:"",widthPosition:"",startPosition:"",endPosition:"",defectLength:"",degree:"",waveHeightCategory:"",period:"",frequency:"",diameter:"",margin:""},defects:[],defectActive:[],defectGroupMap:null,defectMap:null,tempCopy:null,dialogFormVisible:!1,dialogStatus:"",showSpecification:!0,textMap:{update:"编辑",create:"添加"},rules:{name:[{required:!0,message:"请填写检验项目"}],description:[{required:!0,message:"请填写检验内容"}]}}},created:function(){var e=this;this.tempCopy=Object(s["b"])(this.temp),this.$nextTick(Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getDefects({});case 2:case"end":return t.stop()}}),t)}))))},watch:{defectActive:function(e){e&&e[0]&&e[1]&&(this.temp.groupId=e[0],this.temp.groupName=this.defectGroupMap[e[0]].name,this.temp.id=e[1],this.temp.name=this.defectMap[e[1]].name)}},methods:{getDefects:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object($["e"])({});case 2:return t=e.sent,n=t.queryResult.list,this.defectGroupMap=_.fromPairs(n.map((function(e){return[e.id,e]}))),e.next=7,Object($["f"])({});case 7:t=e.sent,r=t.queryResult.list,this.defectMap=_.fromPairs(r.map((function(e){return[e.id,e]}))),i={},r.forEach((function(e){i[e.groupId]?i[e.groupId]=[].concat(Object(L["a"])(i[e.groupId]),[e]):i[e.groupId]=[e]})),this.defects=n.map((function(e){return i[e.id]&&(e.children=i[e.id]),e}));case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),resetForm:function(e){if(void 0===this.$refs[e])return!1;this.$refs[e].resetFields(),this.temp=Object(s["b"])(this.tempCopy)},handleAdd:function(){var e=this;this.resetForm("iqcDefectForm"),this.dialogStatus="create",this.dialogFormVisible=!0,this.defectActive=[this.temp.groupId,this.temp.id],this.$nextTick((function(){e.$refs["iqcDefectForm"].clearValidate()}))},submit:function(){var e=this;this.$refs["iqcDefectForm"].validate((function(t){if(t){var n=Object(s["b"])(e.temp);e.list.unshift(n),e.$emit("update:defectList",e.list),e.dialogFormVisible=!1}}))},handleUpdate:function(e){var t=this;this.dialogStatus="update",this.temp=Object(s["b"])(e),this.defectActive=[this.temp.groupId,this.temp.id],this.dialogFormVisible=!0,this.$nextTick((function(){t.$refs["iqcDefectForm"].clearValidate()}))},updateData:function(){var e=this;this.$refs["iqcDefectForm"].validate((function(t){if(t){var n=Object(s["b"])(e.temp),r=!0,i=!1,a=void 0;try{for(var o,l=e.list[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var c=o.value;if(c.id===n.id){var u=e.list.indexOf(c);e.list.splice(u,1,n),console.log(u);break}}}catch(d){i=!0,a=d}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}e.$emit("update:defectList",e.list),e.dialogFormVisible=!1}}))},handleDelete:function(e){var t=this.list.indexOf(e);this.list.splice(t,1),this.$emit("update:defectList",this.list)}}},S=R,M=(n("cee9"),n("2877")),q=Object(M["a"])(S,j,I,!1,null,null,null),F=q.exports,C={name:"Iqc",components:{Pagination:x["a"],QcDefect:F},directives:{waves:k["a"]},data:function(){return{tableKey:0,list:[],total:0,listLoading:!0,listQuery:{current:1,size:10,name:void 0,isMark:void 0},temp:{id:void 0,inspectDate:"",lineId:"",nextOperationId:"",shiftId:"",materialTypeId:"",surfaceGrade:"",uses:"",customerId:"",inboundOrderId:"",materialId:"",vendorId:"",serialNumber:"",isMark:0,checkList:[],defectList:[],inspectionRuleId:""},tempCopy:null,markStatuses:[{id:0,name:"未提交"},{id:1,name:"已提交"}],lines:[],lineMap:null,operations:[],operationMap:null,shifts:[],shiftMap:null,materialTypes:[],materialTypeMap:null,customers:[],customerMap:null,inboundOrders:[],inboundOrderMap:null,inboundOrderDetails:[],inboundOrderDetailMap:null,materials:[],materialMap:null,vendors:[],vendorMap:null,inspectionRules:[],inspectionRuleMap:null,dialogFormVisible:!1,dialogStatus:"",defectDialogFormVisible:!1,textMap:{update:"编辑",create:"添加"},rules:{name:[{required:!0,trigger:"blur",message:"请填写工艺名称"}],code:[{required:!0,trigger:"blur",message:"请填写工艺编码"}]}}},watch:{"temp.inboundOrderId":{handler:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.handleInboundOrderIdChange(t);case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},"temp.materialId":{handler:function(e){this.handleMaterialIdChange(e)}}},created:function(){var e=this;this.tempCopy=Object(s["b"])(this.temp),this.listLoading=!0,this.$nextTick(Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.getLines({}),e.getOperations({}),e.getShifts({}),e.getMaterialTypes({}),e.getCustomers({}),e.getInboundOrders({}),e.getVendors({})]);case 2:e.getList();case 3:case"end":return t.stop()}}),t)}))))},methods:{generateCheckList:function(e){var t=_.fromPairs(this.temp.checkList.map((function(e){return[e.id,e]})));return e.map((function(e){return t[e.id]&&(e.result=t[e.id].result),e})),e},getLines:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["c"])(t);case 2:n=e.sent,this.lines=n.queryResult.list,this.lineMap=_.fromPairs(this.lines.map((function(e){return[e.id,e]})));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getOperations:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["e"])(t);case 2:n=e.sent,this.operations=n.queryResult.list,this.operationMap=_.fromPairs(this.operations.map((function(e){return[e.id,e]})));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getShifts:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["c"])(t);case 2:n=e.sent,this.shifts=n.queryResult.list,this.shiftMap=_.fromPairs(this.shifts.map((function(e){return[e.id,e]})));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getMaterialTypes:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["e"])(t);case 2:n=e.sent,this.materialTypes=n.queryResult.list,this.materialTypeMap=_.fromPairs(this.materialTypes.map((function(e){return[e.id,e]})));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getCustomers:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(d["c"])(t);case 2:n=e.sent,this.customers=n.queryResult.list,this.customerMap=_.fromPairs(this.customers.map((function(e){return[e.id,e]})));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getInboundOrders:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["c"])(t);case 2:n=e.sent,this.inboundOrders=n.queryResult.list,this.inboundOrderMap=_.fromPairs(this.inboundOrders.map((function(e){return[e.id,e]})));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getInboundOrderDetails:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["c"])(t);case 2:n=e.sent,this.inboundOrderDetails=n.queryResult.list,this.inboundOrderDetailMap=_.fromPairs(this.inboundOrderDetails.map((function(e){return[e.id,e]})));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getVendors:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["c"])(t);case 2:n=e.sent,this.vendors=n.queryResult.list,this.vendorMap=_.fromPairs(this.vendors.map((function(e){return[e.id,e]})));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getInspectionRules:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,getInspectionRules(t);case 2:n=e.sent,this.inspectionRules=n.queryResult.list,this.inspectionRuleMap=_.fromPairs(this.inspectionRules.map((function(e){return[e.id,e]})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()),getList:function(){var e=this;this.listLoading=!0,h(this.listQuery).then((function(t){e.list=t.queryResult.list.map((function(t){var n=e.vendorMap[t.vendorId];return t.vendorName=n.name,t.checkList=JSON.parse(t.checkList),t.defectList=JSON.parse(t.defectList),t})),e.total=t.queryResult.total,e.listLoading=!1}))},handleFilter:function(){this.listQuery.current=1,this.getList()},resetForm:function(e){if(void 0===this.$refs[e])return!1;this.$refs[e].resetFields(),this.temp=Object(s["b"])(this.tempCopy)},handleInboundOrderChange:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={inboundOrderId:t},e.next=3,this.getInboundOrderDetails(n);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleAdd:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.resetForm("iqcForm"),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick((function(){t.$refs["iqcForm"].clearValidate()}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),submit:function(){var e=this;this.$refs["iqcForm"].validate((function(t){if(t){var n=Object(s["b"])(e.temp);n.checkList=JSON.stringify(n.checkList),n.defectList=JSON.stringify(n.defectList),delete n.materialCode,v(n).then((function(t){var r=e.vendorMap[n.vendorId];t.model.vendorName=r.name,t.model.materialCode=e.temp.materialCode,e.list.unshift(t.model),e.total++,e.dialogFormVisible=!1,e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3})}))}}))},handleUpdate:function(e){var t=this;this.dialogStatus="update",this.temp=Object(s["b"])(e),this.dialogFormVisible=!0,this.$nextTick((function(){t.$refs["iqcForm"].clearValidate()}))},updateData:function(){var e=this;this.$refs["iqcForm"].validate((function(t){if(t){var n=Object(s["b"])(e.temp);n.checkList=JSON.stringify(n.checkList),n.defectList=JSON.stringify(n.defectList),delete n.materialCode,g(n).then((function(){var t=e.vendorMap[n.vendorId];n.vendorName=t.name,n.checkList=e.temp.checkList,n.defectList=e.temp.defectList,n.materialCode=e.temp.materialCode;var r=!0,i=!1,a=void 0;try{for(var s,o=e.list[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var l=s.value;if(l.id===n.id){var c=e.list.indexOf(l);e.list.splice(c,1,n);break}}}catch(u){i=!0,a=u}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}e.dialogFormVisible=!1,e.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3})}))}}))},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该工艺, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){y(e.id).then((function(){t.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3});var n=t.list.indexOf(e);t.list.splice(n,1)}))}))},handleInboundOrderIdChange:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t&&(this.temp.vendorId=this.inboundOrderMap[t].vendorId),n={inboundOrderId:t},e.next=4,this.getInboundOrderDetails(n);case 4:this.materials=this.inboundOrderDetails.map((function(e){var t={};return t.id=e.materialId,t.name=e.materialName,t.code=e.materialCode,t})),this.materialMap=_.fromPairs(this.materials.map((function(e){return[e.id,e]}))),this.handleMaterialIdChange(this.temp.materialId);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleMaterialIdChange:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.materialMap&&this.materialMap[t]){e.next=2;break}return e.abrupt("return");case 2:if(!t){e.next=20;break}return this.temp.materialCode=this.materialMap[t].code,n={materialId:t},e.next=7,Object(w["c"])(n);case 7:if(r=e.sent,!r.queryResult.total){e.next=17;break}return this.temp.inspectionRuleId=r.queryResult.list[0].inspectionRuleId,n={inspectionRuleId:this.temp.inspectionRuleId},e.next=13,Object(O["c"])(n);case 13:r=e.sent,this.temp.checkList=this.generateCheckList(r.queryResult.list),e.next=18;break;case 17:this.temp.checkList=[];case 18:e.next=21;break;case 20:this.temp.checkList=[];case 21:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},D=C,T=Object(M["a"])(D,r,i,!1,null,"c8e3f0dc",null);t["default"]=T.exports},"49de":function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"h",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"f",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"c",(function(){return d}));var r=n("b775");function i(e){return Object(r["a"])({url:"/basic/materialtype/list",method:"post",data:e})}function a(e){return Object(r["a"])({url:"/basic/materialtype",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/basic/materialtype",method:"put",data:e})}function o(e){return Object(r["a"])({url:"/basic/materialtype/".concat(e),method:"delete"})}function l(e){return Object(r["a"])({url:"/basic/material/list",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/basic/material",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/basic/material",method:"put",data:e})}function d(e){return Object(r["a"])({url:"/basic/material/".concat(e),method:"delete"})}},"666f":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return o}));var r=n("b775");function i(e){return Object(r["a"])({url:"/basic/line/list",method:"post",data:e})}function a(e){return Object(r["a"])({url:"/basic/line",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/basic/line",method:"put",data:e})}function o(e){return Object(r["a"])({url:"/basic/line/".concat(e),method:"delete"})}},6724:function(e,t,n){"use strict";n("8d41");var r="@@wavesContext";function i(e,t){function n(n){var r=Object.assign({},t.value),i=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},r),a=i.ele;if(a){a.style.position="relative",a.style.overflow="hidden";var s=a.getBoundingClientRect(),o=a.querySelector(".waves-ripple");switch(o?o.className="waves-ripple":(o=document.createElement("span"),o.className="waves-ripple",o.style.height=o.style.width=Math.max(s.width,s.height)+"px",a.appendChild(o)),i.type){case"center":o.style.top=s.height/2-o.offsetHeight/2+"px",o.style.left=s.width/2-o.offsetWidth/2+"px";break;default:o.style.top=(n.pageY-s.top-o.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",o.style.left=(n.pageX-s.left-o.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return o.style.backgroundColor=i.color,o.className="waves-ripple z-active",!1}}return e[r]?e[r].removeHandle=n:e[r]={removeHandle:n},n}var a={bind:function(e,t){e.addEventListener("click",i(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[r].removeHandle,!1),e.addEventListener("click",i(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[r].removeHandle,!1),e[r]=null,delete e[r]}},s=function(e){e.directive("waves",a)};window.Vue&&(window.waves=a,Vue.use(s)),a.install=s;t["a"]=a},"8d41":function(e,t,n){},"9e35":function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return o}));var r=n("b775");function i(e){return Object(r["a"])({url:"/basic/inboundorderdetail/list",method:"post",data:e})}function a(e){return Object(r["a"])({url:"/basic/inboundorderdetail",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/basic/inboundorderdetail",method:"put",data:e})}function o(e){return Object(r["a"])({url:"/basic/inboundorderdetail/".concat(e),method:"delete"})}},b494:function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"h",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"f",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"c",(function(){return d}));var r=n("b775");function i(e){return Object(r["a"])({url:"/basic/defectgroup/list",method:"post",data:e})}function a(e){return Object(r["a"])({url:"/basic/defectgroup",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/basic/defectgroup",method:"put",data:e})}function o(e){return Object(r["a"])({url:"/basic/defectgroup/".concat(e),method:"delete"})}function l(e){return Object(r["a"])({url:"/basic/defect/list",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/basic/defect",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/basic/defect",method:"put",data:e})}function d(e){return Object(r["a"])({url:"/basic/defect/".concat(e),method:"delete"})}},c45a:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return o}));var r=n("b775");function i(e){return Object(r["a"])({url:"/basic/vendor/list",method:"post",data:e})}function a(e){return Object(r["a"])({url:"/basic/vendor",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/basic/vendor",method:"put",data:e})}function o(e){return Object(r["a"])({url:"/basic/vendor/".concat(e),method:"delete"})}},c7a3:function(e,t,n){},cee9:function(e,t,n){"use strict";var r=n("c7a3"),i=n.n(r);i.a},f36f:function(e,t,n){"use strict";n.d(t,"f",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"h",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"c",(function(){return d}));var r=n("b775");n("ed08");function i(e){return Object(r["a"])({url:"/basic/workflow/list",method:"post",data:e})}function a(e){return Object(r["a"])({url:"/basic/workflow",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/basic/workflow",method:"put",data:e})}function o(e){return Object(r["a"])({url:"/basic/workflow/".concat(e),method:"delete"})}function l(e){return Object(r["a"])({url:"/basic/operation/list",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/basic/operation",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/basic/operation",method:"put",data:e})}function d(e){return Object(r["a"])({url:"/basic/operation/".concat(e),method:"delete"})}},f4942:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return o}));var r=n("b775");function i(e){return Object(r["a"])({url:"/basic/inspectionrulematerial/list",method:"post",data:e})}function a(e){return Object(r["a"])({url:"/basic/inspectionrulematerial",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/basic/inspectionrulematerial",method:"put",data:e})}function o(e){return Object(r["a"])({url:"/basic/inspectionrulematerial/".concat(e),method:"delete"})}},f6b0:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return o}));var r=n("b775");function i(e){return Object(r["a"])({url:"/basic/customer/list",method:"post",data:e})}function a(e){return Object(r["a"])({url:"/basic/customer",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/basic/customer",method:"put",data:e})}function o(e){return Object(r["a"])({url:"/basic/customer/".concat(e),method:"delete"})}}}]);